set $mod Mod4

set $dark_red       #cc241d
set $dark_green     #98971a
set $dark_yellow    #d79921
set $dark_blue      #458588
set $dark_purple    #b16286
set $dark_aqua      #689d6a
set $red            #fb4934
set $green          #b8bb26
set $yellow         #fabd2f
set $blue           #83a598
set $purple         #d3869b
set $aqua           #8ec07c

set $darker         #1d2021
set $dark           #282828
set $grey           #928374
set $light          #a89984
set $lighter        #bdae93
set $lightest       #ebdbb2
set $white          #fbf1c7

output * bg ~/Downloads/tardi.jpg fill
# output * background $dark solid_color

input "1:1:AT_Translated_Set_2_keyboard" {
  xkb_layout "us,ca"
  xkb_variant ",multi"
  xkb_options "ctrl:nocaps,grp:win_space_toggle"
}

input "1739:0:Synaptics_TM3075-002" {
  tap enable
  dwt enable
  natural_scroll enabled
  accel_profile adaptive
}

input "1133:16468:Logitech_Wireless_Mouse" {
  natural_scroll enabled
}

titlebar_border_thickness 1
titlebar_padding 6 1
default_border pixel 1
hide_edge_borders --i3 smart_no_gaps

bar {
    position bottom
    height 20
    strip_workspace_numbers yes

    status_command ~/.config/sway/status.sh

    colors {
        background $darker
        statusline $lightest
        separator $light

        focused_workspace $lightest $lightest $darker
        urgent_workspace $white $red $lightest
        inactive_workspace $darker $darker $grey
    }
}

                      # border    background  text      indicator     child_border
                      # ----------------------------------------------------------
client.focused          $lightest $lightest   $darker   $lighter      $light
client.focused_inactive $darker   $darker     $grey     $dark         $dark
client.unfocused        $darker   $darker     $grey     $dark         $dark
client.urgent           $yellow   $red        $lighter  $red          $red


floating_modifier $mod normal

set $web 爵
set $cli 
set $game 
set $comms 
set $pass 
set $gear 
set $stats 

bindsym {
  XF86AudioRaiseVolume exec amixer sset Master 2%+ | sed -En 's/.*\[([0-9]+)%\].*/\1/p' | head -1 > $WOBSOCK
  XF86AudioLowerVolume exec amixer sset Master 2%- | sed -En 's/.*\[([0-9]+)%\].*/\1/p' | head -1 > $WOBSOCK
  XF86AudioMute exec amixer sset Master toggle | sed -En '/\[on\]/ s/.*\[([0-9]+)%\].*/\1/ p; /\[off\]/ s/.*/0/p' | head -1 > $WOBSOCK
  XF86AudioMicMute exec amixer sset Capture toggle
  XF86MonBrightnessDown exec brightnessctl set 5%- | sed -En 's/.*\(([0-9]+)%\).*/\1/p' > $WOBSOCK
  XF86MonBrightnessUp exec brightnessctl set +5% | sed -En 's/.*\(([0-9]+)%\).*/\1/p' > $WOBSOCK

  $mod+Return   exec kitty
  $mod+i        exec qutebrowser
  $mod+d        exec wofi --gtk-dark --insensitive --show run | xargs swaymsg exec --
  $mod+p        exec grimshot save active
  $mod+Shift+p  exec grimshot save area
  $mod+Ctrl+p   exec grimshot save window
  $mod+b        exec sh -c "if bluetoothctl -- show | rg -i -c 'powered: no'; then bluetoothctl -- power on; else bluetoothctl -- power off; fi"

  $mod+Shift+e  exec swaynag -t warning -m 'Saved your work?' -b 'Quit' 'swaymsg exit'
  $mod+Shift+c  reload
  $mod+Shift+q  kill

  $mod+a focus parent
  $mod+c splith
  $mod+v splitv

  $mod+s layout stacking
  $mod+w layout tabbed
  $mod+e layout toggle split
  $mod+f fullscreen
  $mod+Shift+space floating toggle

  # $mod+m focus mode_toggle

  $mod+minus scratchpad show
  $mod+Shift+minus move scratchpad

  $mod+h focus left
  $mod+j focus down
  $mod+k focus up
  $mod+l focus right
  $mod+Left focus left
  $mod+Down focus down
  $mod+Up focus up
  $mod+Right focus right

  $mod+Shift+h move left
  $mod+Shift+j move down
  $mod+Shift+k move up
  $mod+Shift+l move right
  $mod+Shift+Left move left
  $mod+Shift+Down move down
  $mod+Shift+Up move up
  $mod+Shift+Right move right
  $mod+r mode "resize"

  $mod+Tab workspace back_and_forth
  $mod+Prior workspace prev
  $mod+Next workspace next

  $mod+1 workspace 1:$web
  $mod+2 workspace 2:$cli
  $mod+3 workspace 3:$comms
  $mod+4 workspace 4:$gear
  $mod+5 workspace 5
  $mod+6 workspace 6
  $mod+7 workspace 7
  $mod+8 workspace 8:$game
  $mod+9 workspace 9:$stats
  $mod+0 workspace 10:$pass

  $mod+Shift+1 move container to workspace 1:$web
  $mod+Shift+2 move container to workspace 2:$cli
  $mod+Shift+3 move container to workspace 3:$comms
  $mod+Shift+4 move container to workspace 4:$gear
  $mod+Shift+5 move container to workspace 5
  $mod+Shift+6 move container to workspace 6
  $mod+Shift+7 move container to workspace 7
  $mod+Shift+8 move container to workspace 8:$game
  $mod+Shift+9 move container to workspace 9:$stats
  $mod+Shift+0 move container to workspace 10:$pass
  $mod+Shift+s move container to scratchpad

}

mode "resize" {
    bindsym {
      h resize shrink width 10px
      j resize grow height 10px
      k resize shrink height 10px
      l resize grow width 10px

      Left resize shrink width 10px
      Down resize grow height 10px
      Up resize shrink height 10px
      Right resize grow width 10px

      Return mode "default"
      Escape mode "default"
    }
}

assign [app_id="firefoxdeveloperedition"] 1:$web
assign [class="firefoxdeveloperedition"] 1:$web
assign [app_id="org.qutebrowser.qutebrowser"] 1:$web

assign [class="Steam"] 8:$game
assign [class="steam"] 8:$game

assign [class="discord"] 3:$comms
assign [class="Signal"] 3:$comms
assign [app_id="Slack"] 3:$comms

assign [app_id="com.github.wwmm.easyeffects"] 4:$gear

assign [app_id="org.keepassxc.KeePassXC"] 10:$pass
for_window [app_id="org.keepassxc.KeePassXC"] floating enable

# exec xsettingsd

exec gammastep

set $WOBSOCK $XDG_RUNTIME_DIR/wob.sock
exec rm -f $WOBSOCK && mkfifo $WOBSOCK && tail -f $WOBSOCK | wob --width=$(swaymsg -t get_outputs | jq '.[0].current_mode.width') --height=11 --border=0 --padding=0 --background-color=#1D2021FF --bar-color=#EBDBB2FF --anchor=top --margin=-4
exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK

